{% extends 'base.html' %}
{% load staticfiles %}

{% load bootstrap3 %}
{% load staticfiles %}
{% bootstrap_css %}
{% bootstrap_javascript %}

{% block title %}User Profile :  {{ username }}{% endblock %}

{% block body_block %}

{% if NOT_FOUND %}
<h1> Username Not Found </h1>

<p> A user with the given username was not found. Please try your search again!</p>
{% else %}

  <h1>{{ username }}'s Profile</h1>
  <div class="col-sm-10">
  <div class="panel panel-default">
      <div class="panel-body">
      <div class="row">
        <div class="col-sm-5">
          <img src="{{ MEDIA_URL }}{{ img }}" alt="User's Profile Image" />
        </div>
        <div class="col-sm-5">
          {{ bio }}
        </div>
      </div>
      {% if current %}
        <h3 class="page-heading"> Account Options </h3>
        <div class="row">
          <div class="col-sm-5">
            <p><a href="{% url 'passwordChange' %}">Change Password</a></p>
          </div>
          <div class="col-sm-5">
            <p><a href="{% url 'profile' %}">Update Profile</a></p>
          </div>
        </div>
      {% endif %}
    </div>
      <div class="panel-footer" class="bark-tags">
          <b>Total Barks:</b> {{ bark_count }} | <span class="text-muted">Average Rating: {{ bark_rating }}</span>
      <div class="pull-right">
        <b>Total Bark Views: </b> {{ bark_views }}
      </div>
    </div>
  </div>
  <br>
  <h2 class="page-heading"> Posts by User <small><a href="#">See more...</a></small></h2>
  {% if posts %}

    {% for p in posts %}
    <div class="panel panel-default">
        <div class="panel-heading"><p class="panel-title">{{ p.title }}</p></div>
        <div class="panel-body">{{ p.content }}</div>
        <div class="panel-footer" class="bark-tags">
            <b>Tags: </b>
            <a class="user" href="#">@{{ p.author.user_tag }}</a><span> | </span>
            {% for post_tag in p.tags.all %}
                {% if forloop.first %}
                    <a class="tag" href="#">@{{ post_tag }}</a>
                {% elif forloop.last %}
                    <span> | </span><a class="tag" href="#">@{{ post_tag }}</a><span> | </span>
                {% else %}
                    <span> | </span><a class="tag" href="#">@{{ post_tag }}</a>
                {% endif %}
            {% endfor %}


        {% if user.is_authenticated %}
        <div class="pull-right" id="like">
            {% buttons %}
                <button type="submit">
                    {% bootstrap_icon "thumbs-up" %}
                </button>
            {% endbuttons %}
        </div>
        {% endif %}
    {% endfor %}



  {% else %}
  <p class="text-muted">This user has not made any posts</p>
  </div>
  {% endif %}
{% endif %}
{% endblock %}
